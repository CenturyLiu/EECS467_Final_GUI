from scipy.signal import butter, lfilter
import numpy as np
import matplotlib.pyplot as plt
from scipy.signal import freqz

# lowcut = 0.01
# highcut = 0.99
# fs = 0.90
lowcut = 0.1
highcut = 9.9
fs = 50.0

def butter_bandpass(lowcut, highcut, fs, order=5):
    nyq = 0.5 * fs
    low = lowcut / nyq
    high = highcut / nyq
    b, a = butter(order, [low, high], btype='band')
    return b, a


def butter_bandpass_filter(data, lowcut=lowcut, highcut=highcut, fs=fs, order=5):
    b, a = butter_bandpass(lowcut, highcut, fs, order=order)
    y = lfilter(b, a, data)
    return y

if __name__ == "__main__":

    data = [0.7684047368421054, 0.7684047368421054, 0.5488605263157895, 0.5488605263157895, 0.5488605263157895, 0.3293163157894736, 0.3293163157894736, 0.10977210526315817, 0.10977210526315817, 0.10977210526315817, -0.10977210526315773, -0.10977210526315773, -0.10977210526315773, -0.3293163157894736, -0.3293163157894736, -0.5488605263157895, -0.5488605263157895, -0.5488605263157895, -0.5488605263157895, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.9879489473684209, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.7684047368421052, -0.5488605263157895, -0.5488605263157895, -0.5488605263157895, -0.5488605263157895, -0.5488605263157895, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.3293163157894736, -0.10977210526315773, -0.10977210526315773, -0.10977210526315773, -0.10977210526315773, -0.10977210526315773]
    dataOffset = data[0]
    data = [x-dataOffset for x in data]
    data = data[:20]
    y = butter_bandpass_filter(data)


    plt.plot(y, label='filter data')
    plt.plot(data, label='raw data')
    plt.legend()
    plt.show()
